/** * Copyright (C), 2015-2021, 中信银行有限公司 * FileName: Mgr03 * Author:   willem * Date:     2021/5/13 4:23 下午 * Description: 懒汉式 * History: * <author>          <time>          <version>          <desc> * 作者姓名           修改时间           版本号              描述 */package singleton;/** * 〈一句话功能简述〉<br>  * 〈懒汉式〉 *  虽然提供了什么时候用什么时候初始化 但是带来了线程安全问题 * @author willem * @create 2021/5/13 * @since 1.0.0 */public class Mgr03 {    private static Mgr03 INSTANCE;    private Mgr03() {    }    //多个线程执行这个方法    public static Mgr03 getInstance() {        //这里线程不安全        if (INSTANCE == null) {            try {                //睡一秒增加打断的机会                Thread.sleep(1);            } catch (InterruptedException e) {                e.printStackTrace();            }            INSTANCE = new Mgr03();        }        return INSTANCE;    }    public static void main(String[] args) {        for (int i = 0; i < 100; i++) {            new Thread(() -> {                //哈希码不同就不是同一个对象                System.out.println(Mgr03.getInstance().hashCode());            }).start();        }    }}